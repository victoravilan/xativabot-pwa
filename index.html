<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#8B0000"/>
  <meta name="description" content="XativaBot - Your personal chef assistant for Xativa restaurants"/>
  <title>XativaBot - Your Personal Chef Assistant</title>

  <link rel="manifest" href="/manifest.json"/>
  <link rel="icon" type="image/png" href="/icons/icon-192.png"/>
  <link rel="apple-touch-icon" href="/icons/icon-192.png"/>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="logo-container">
        <!-- Fallback: si no existe xativa-logo.png intenta el archivo con hash -->
        <img
          src="images/Simbolo_A_verde.svg"
          onerror="this.onerror=null;this.src='images/375c86645a43b8c72c300a081a12ebf642aac8aa621ca08416da4c42ca3143d5.png';"
          alt="Xativa Logo"
          class="logo"
        />
      </div>
      <div class="language-selector">
        <select id="language-select">
          <option value="en">English</option>
          <option value="es" selected>Español</option>
          <option value="ca">Català</option>
        </select>
      </div>
    </header>

    <main class="chat-container">
      <div class="chef-profile">
        <div class="chef-avatar">
          <img src="images/alexbot-chef.png"
               onerror="this.onerror=null;this.src='images/chef-avatar.png';"
               alt="AlexBot Chef" id="chef-avatar">
        </div>
        <div class="chef-info">
          <h1>AlexBot</h1>
          <p class="chef-title"
             data-en="Executive Chef"
             data-es="Chef Ejecutivo"
             data-ca="Xef Executiu">Chef Ejecutivo</p>
        </div>
      </div>

      <div class="chat-messages" id="chat-messages">
        <!-- bienvenida se inyecta desde app.js para respetar idioma -->
      </div>

      <div class="suggestion-chips">
        <button class="chip"
          data-en="Show menu"
          data-es="Ver carta"
          data-ca="Veure carta">Ver carta</button>

        <button class="chip"
          data-en="Recommend a dish"
          data-es="Recomiéndame un plato"
          data-ca="Recomana un plat">Recomiéndame un plato</button>

        <button class="chip"
          data-en="I have allergies"
          data-es="Tengo alergias"
          data-ca="Tinc al·lèrgies">Tengo alergias</button>

        <button class="chip"
          data-en="Food history & myths"
          data-es="Historia y mitos culinarios"
          data-ca="Història i mites culinaris">Historia y mitos culinarios</button>

        <button class="chip"
          data-en="Make a reservation"
          data-es="Hacer una reserva"
          data-ca="Fer una reserva">Hacer una reserva</button>
      </div>

      <div class="user-input-container">
        <textarea id="user-input"
          placeholder="Escribe tu mensaje..."
          data-en="Type your message..."
          data-es="Escribe tu mensaje..."
          data-ca="Escriu el teu missatge..."></textarea>
        <div class="input-actions">
          <button id="voice-input-btn" class="voice-btn" title="Voice">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 15c2.21 0 4-1.79 4-4V5c0-2.21-1.79-4-4-4S8 2.79 8 5v6c0 2.21 1.79 4 4 4zm0-2c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2s2 .9 2 2v6c0 1.1-.9 2-2 2zm4 2v1c0 2.76-2.24 5-5 5s-5-2.24-5-5v-1H4v1c0 3.53 2.61 6.43 6 6.92V22h4v-2.08c3.39-.49 6-3.39 6-6.92v-1h-2z"/></svg>
          </button>
          <button id="send-btn" class="send-btn" title="Send">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
          </button>
        </div>
      </div>
    </main>

    <div class="voice-indicator" id="voice-indicator">
      <div class="voice-waves">
        <span></span><span></span><span></span><span></span><span></span>
      </div>
      <p class="listening-text"
         data-en="Listening..."
         data-es="Escuchando..."
         data-ca="Escoltant...">Escuchando...</p>
    </div>
  </div>

  <footer class="app-footer">
    <p>© 2025 Xativa Restaurants. <span data-en="All rights reserved." data-es="Todos los derechos reservados." data-ca="Tots els drets reservats.">Todos los derechos reservados.</span></p>
  </footer>

  <script src="/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service worker registered', reg))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
