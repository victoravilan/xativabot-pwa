/* ==========================
   XativaBot PWA - Main Stylesheet
   ========================== */
:root{
  --primary-color:#8B0000;
  --secondary-color:#F8F1E9;
  --accent-color:#D4AF37;
  --text-color:#333333;
  --light-text:#FFFFFF;
  --background-color:#F9F9F9;
  --card-bg:#FFFFFF;
  --shadow:0 4px 12px rgba(0,0,0,0.1);
  --border-radius:12px;
  --transition:all 0.3s ease;
  --font-heading:'Playfair Display',serif;
  --font-body:'Roboto',sans-serif;
}

*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:var(--font-body);
  background-color:var(--background-color);
  color:var(--text-color);
  line-height:1.6;
  overflow-x:hidden;
}
.app-container{max-width:100%;min-height:100vh;display:flex;flex-direction:column}

/* Header */
.app-header{
  background-color:var(--primary-color);
  color:var(--light-text);
  padding:15px 20px;
  display:flex;justify-content:space-between;align-items:center;
  box-shadow:var(--shadow);position:sticky;top:0;z-index:100;
}
.logo-container{display:flex;align-items:center}
.logo{height:40px;width:auto}
.language-selector select{
  background-color:transparent;border:1px solid rgba(255,255,255,0.3);
  color:var(--light-text);padding:8px 12px;border-radius:20px;font-size:14px;
  outline:none;cursor:pointer;transition:var(--transition)
}
.language-selector select:hover{background-color:rgba(255,255,255,0.1)}
.language-selector select option{background-color:var(--primary-color);color:var(--light-text)}

/* Chat container */
.chat-container{
  flex:1;display:flex;flex-direction:column;padding:20px;
  max-width:800px;margin:0 auto;width:100%;
}

/* Chef profile */
.chef-profile{
  display:flex;align-items:center;margin-bottom:30px;padding:20px;
  background-color:var(--card-bg);border-radius:var(--border-radius);box-shadow:var(--shadow)
}
.chef-avatar{width:80px;height:80px;border-radius:50%;overflow:hidden;border:3px solid var(--accent-color);margin-right:20px}
.chef-avatar img{width:100%;height:100%;object-fit:cover}
.chef-info h1{font-family:var(--font-heading);color:var(--primary-color);margin-bottom:5px;font-size:24px}
.chef-title{color:#666;font-size:16px;font-style:italic}

/* Messages */
.chat-messages{flex:1;overflow-y:auto;padding:20px 0;display:flex;flex-direction:column;gap:15px}
.message{max-width:80%;padding:12px 16px;border-radius:18px;margin-bottom:10px;animation:fadeIn .3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)}}
.bot-message{background-color:var(--secondary-color);align-self:flex-start;border-bottom-left-radius:5px}
.user-message{background-color:var(--primary-color);color:var(--light-text);align-self:flex-end;border-bottom-right-radius:5px}
.welcome-message{font-size:16px;line-height:1.5}

/* Chips */
.suggestion-chips{display:flex;flex-wrap:wrap;gap:10px;margin:15px 0}
.chip{
  background-color:var(--secondary-color);color:var(--primary-color);border:none;
  padding:8px 16px;border-radius:20px;font-size:14px;cursor:pointer;transition:var(--transition);white-space:nowrap
}
.chip:hover{background-color:var(--primary-color);color:var(--light-text);transform:translateY(-2px)}

/* Input */
.user-input-container{
  display:flex;background-color:var(--card-bg);border-radius:var(--border-radius);
  padding:12px;box-shadow:var(--shadow);margin-top:20px
}
#user-input{
  flex:1;border:none;outline:none;background:transparent;padding:10px;
  font-family:var(--font-body);font-size:16px;resize:none;max-height:120px;min-height:24px
}
.input-actions{display:flex;align-items:center;gap:10px}
.voice-btn,.send-btn{
  background:none;border:none;cursor:pointer;padding:8px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;transition:var(--transition)
}
.voice-btn svg,.send-btn svg{fill:var(--primary-color);width:24px;height:24px}
.voice-btn:hover,.send-btn:hover{background-color:rgba(139,0,0,0.1)}
.voice-btn.active{background-color:var(--primary-color)}
.voice-btn.active svg{fill:var(--light-text)}

/* Voice indicator */
.voice-indicator{
  position:fixed;bottom:100px;left:50%;transform:translateX(-50%);
  background-color:rgba(0,0,0,0.7);color:#fff;padding:15px 30px;border-radius:30px;
  display:none;align-items:center;justify-content:center;flex-direction:column;z-index:1000
}
.voice-indicator.active{display:flex;animation:fadeIn .3s ease}
.voice-waves{display:flex;align-items:center;height:40px;margin-bottom:10px}
.voice-waves span{display:inline-block;width:4px;height:20px;margin:0 3px;background-color:#fff;border-radius:2px;animation:wave 1s infinite ease-in-out}
.voice-waves span:nth-child(2){animation-delay:.1s}
.voice-waves span:nth-child(3){animation-delay:.2s}
.voice-waves span:nth-child(4){animation-delay:.3s}
.voice-waves span:nth-child(5){animation-delay:.4s}
@keyframes wave{0%,100%{height:10px} 50%{height:30px}}
.listening-text{font-size:14px}

/* Footer */
.app-footer{background-color:var(--primary-color);color:#fff;text-align:center;padding:15px;font-size:14px}

/* Responsive */
@media (max-width:768px){
  .chat-container{padding:15px}
  .chef-profile{padding:15px}
  .chef-avatar{width:60px;height:60px}
  .chef-info h1{font-size:20px}
  .message{max-width:90%}
}
@media (max-width:480px){
  .app-header{padding:10px 15px}
  .logo{height:30px}
  .language-selector select{padding:6px 10px;font-size:12px}
  .chef-profile{flex-direction:column;text-align:center}
  .chef-avatar{margin-right:0;margin-bottom:15px}
  .suggestion-chips{justify-content:center}
  .chip{font-size:12px;padding:6px 12px}
}

/* Dark mode */
@media (prefers-color-scheme:dark){
  :root{
    --background-color:#121212;--card-bg:#1E1E1E;--text-color:#E0E0E0;--secondary-color:#2C1A1A;
  }
  .chef-info h1{color:var(--accent-color)}
  .chef-title{color:#A0A0A0}
}

/* ==========================
   Burbuja Formulario Reserva
   ========================== */
.message.bot-message .reservation-form{
  display:grid;gap:10px;margin-top:8px;width:100%;max-width:520px;
  background:#fff;border:1px solid #eee;border-radius:14px;padding:14px;box-shadow:0 4px 18px rgba(0,0,0,.06)
}
.reservation-form label{font-size:.92rem;color:#333;display:grid;gap:6px}
.reservation-form input,.reservation-form textarea,.reservation-form select,.reservation-form button{
  font-family:inherit;font-size:.95rem
}
.reservation-form input[type="text"],.reservation-form input[type="email"],.reservation-form input[type="tel"],
.reservation-form input[type="datetime-local"],.reservation-form input[type="number"],.reservation-form textarea{
  width:100%;border:1px solid #e5e7eb;background:#fafafa;color:#111;border-radius:10px;padding:10px 12px;
  transition:border-color .15s,box-shadow .15s,background-color .15s
}
.reservation-form textarea{min-height:84px;resize:vertical}
.reservation-form input:focus,.reservation-form textarea:focus{
  outline:none;border-color:#8B0000;box-shadow:0 0 0 3px rgba(139,0,0,.15);background:#fff
}
.reservation-form ::placeholder{color:#9aa0a6}
@media (min-width:520px){
  .reservation-form{grid-template-columns:1fr 1fr}
  .reservation-form label:nth-last-of-type(2){grid-column:1 / -1}
  .reservation-form button[type="submit"]{grid-column:1 / -1;justify-self:stretch}
}
.reservation-form button[type="submit"]{
  appearance:none;border:none;border-radius:12px;padding:12px 16px;background:#8B0000;color:#fff;font-weight:600;cursor:pointer;
  transition:transform .08s, box-shadow .15s;box-shadow:0 8px 20px rgba(139,0,0,.25)
}
.reservation-form button[type="submit"]:hover{transform:translateY(-1px);box-shadow:0 10px 22px rgba(139,0,0,.28)}
.reservation-form button[type="submit"]:active{transform:translateY(0);box-shadow:0 6px 14px rgba(139,0,0,.22)}
.reservation-form button[disabled]{opacity:.65;cursor:not-allowed}

/* ==========================
   MODAL DEL JUEGO (iframe)
   ========================== */
.game-modal{
  position:fixed;inset:0;background:rgba(0,0,0,.6);
  display:none;align-items:center;justify-content:center;padding:12px;z-index:2000
}
.game-modal.open{display:flex}
.game-panel{
  width:min(980px,100%);height:min(90vh,100%);background:var(--card-bg);border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.35);display:flex;flex-direction:column;overflow:hidden
}
.game-header{
  display:flex;align-items:center;justify-content:space-between;background:var(--primary-color);
  color:#fff;padding:10px 14px
}
.game-close{
  border:none;background:transparent;font-size:24px;color:#fff;cursor:pointer;line-height:1
}
.game-frame{
  width:100%;height:100%;flex:1;border:none;background:#000; /* el juego define su propio fondo */
}
.game-footer{
  padding:10px 12px;border-top:1px solid rgba(0,0,0,.08);background:var(--secondary-color)
}
.game-controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px}
#game-code-input{
  flex:1;min-width:180px;border:1px solid #e5e7eb;border-radius:10px;padding:10px 12px;background:#fff
}
.game-status{font-size:.9rem;opacity:.85}

/* Dietary wizard chips (reutiliza .chip) */
.dietary-wizard .diet-chip.active{background:var(--primary-color);color:#fff}

/* Dark modal */
@media (prefers-color-scheme:dark){
  .game-panel{background:#141414}
  .game-footer{background:#1c1c1c;border-top-color:#333}
  #game-code-input{background:#101010;color:#f0f0f0;border-color:#222}
}
